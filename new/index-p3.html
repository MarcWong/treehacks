<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="gb2312">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="HACKPKU 2016 - Let's make a difference.">
    <meta name="author" content="">
    
    <title>HACKPKU 2016</title>
    
    <!-- Bootstrap -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="/img/favicon.png">
    
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <!-- jQuery -->
    <script src="../js/jquery.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- Plugin JavaScript -->
    <script src="../js/jquery.easing.min.js"></script>
    
    <link href="common.css" rel="stylesheet">
    <link href="form.css" rel="stylesheet">



</head>

<body>
  
  <section>
    
    <div class="content-header">
      <img class="heading-img" src="../svg/page3/logo-orange.svg" alt="page 3"/>
      <img class="heading-tri" src="../svg/page3/triangles-orange.svg" alt="page 3"/>
    </div>
    
    <div class="section">
    <div class="section-title">Sign Up Now</div>
    <hr class="section-hr"/>
    <div class="section-content">
      <div class="form">
        
        
      <!--Basic Info-->
      <p class="subtitle"> Basic Info </p>
			<label for="name" id="lname"> Name </label><input class="input" id="name" type = "text" name = "name"/><br/>
			<label for="male" id="lgender"> Gender </label>
			<label for="male" class="radio-circle" id="lmale"> &nbsp; </label>
			<input type = "radio" id = "male" name = "gender"  value = "male"/> &nbsp;&nbsp;MALE <br/>
			<label for="female"> &nbsp; </label>
			<label for="female" class="radio-circle" id="lfemale"> &nbsp; </label>
			<input type = "radio" id = "female" name = "gender"  value = "female"/> &nbsp;&nbsp;FEMALE <br/>	
			<label for="name" id="luni"> School </label>
			<input class="input" id="school" type = "text"  name = "school"  value = "北京大学" /><br/>
			
			<!-- If group -->
			<p class="subtitle"> Group Info </p>
			<label for="ifgroup" style="width: auto" id="lgroup"> Are you in a group? &nbsp;&nbsp;</label>
			<label for="ifgroup" class="radio-circle" id="group"> &nbsp; </label>
			<input type="checkbox" id="ifgroup" name="ifgroup"> &nbsp;&nbsp;YES, I AM <br/>
			
			<!-- Contact info -->
			<p class="subtitle"> Contact </p>
			<label for="email" id="lemail"> E-mail </label>
			<input class="input" id="email" type = "email"  name = "email"/><br />
			<label for="phone" id="lphone"> Phone </label>
			<input class="input" id="phone" type = "text"  name = "phone"/><br />
			<div id="reminder" style="text-align: center;"></div>
			<label for="submit"> &nbsp; </label>
			<input class="btn btn-default btn-lg" id="submit" type = "submit"  value = "submit" onclick="send()"/>
			<input class="btn btn-default btn-lg" type = "reset" id="reset" value = "reset" onclick="reset()" />
			
			
			<script type="text/javascript">
  		  $(document).ready(function(){
          $('input[type=radio]').click(function(){
              var radio;
              var other_radio;            
              if (this.value == 'male') {
                radio = document.getElementById("lmale");
                other_radio = document.getElementById("lfemale");
              } else {
                radio = document.getElementById("lfemale");
                other_radio = document.getElementById("lmale");
              }
            if (radio.className == "radio-circle box-checked" &&
                other_radio.className == "radio-circle") {
                  return;
            } else if (radio.className == "radio-circle") {
              radio.setAttribute("class", "radio-circle box-checked");
              other_radio.setAttribute("class", "radio-circle");
            } else {
              other_radio.setAttribute("class", "radio-circle box-checked");
              radio.setAttribute("class", "radio-circle");;
            }

          });
        
          $('input[type=checkbox]').click(function(){
            var radio = document.getElementById("group");
            if (radio.className == "radio-circle") {
              radio.setAttribute("class", "radio-circle box-checked");
            } else {
              radio.setAttribute("class", "radio-circle");
            }
          });
  
        
        });
        
    $("#form").keyup(function (e) {
      if (e.keyCode == 13) {
        var name = $("#name").val();
        var gender = $("input[name='gender']:checked").val();
        var school = $("#school").val();
        
        var phone = $("#phone").val();
        var email = $("#email").val();

        if (name&&gender&&school&&phone&&email) {
          if (name.length>0&&school.length>0&&phone.length>0&&email.length>0){
            send()
          }
        }
      }
    });
    
    function reset(){
    $(':input')
      .not(':button, :submit, :reset, :hidden, :radio')
      .val('');
    $('input[type=radio]').removeAttr('checked');
    document.getElementById("reminder").innerHTML = "";
    $("#reminder").css("display","none");
  }
  
  function send() {
    
    document.getElementById("reminder").innerHTML = "Submitting, please wait...";
    $("#reminder").css("display","block");
    $("#submit").attr("disabled", true);
		$("#reset").attr("disabled", true);
    
    var name = $("#name").val();
    var gender = $("input[name='gender']:checked").val();
    var school = $("#school").val();
    var ifgroup = $("input[name='ifgroup']:checked").length;
    var phone = $("#phone").val();
    var email = $("#email").val();
        
    $.ajax({ url:"http://123.56.187.40/gateway.php?action=add", type:"POST", dataType:"json", data:{
          name:name, gender:gender, school:school, ifgroup:ifgroup, phone:phone, email:email
        }, success: function(data){
          $("#submit").removeAttr("disabled");
          $("#reset").removeAttr("disabled");
          if (data.code==0) {
            reset();
	         }
           document.getElementById("reminder").innerHTML = data.msg;
           $("#reminder").css("display","block");
           return true;
        }, error: function(){
          document.getElementById("reminder").innerHTML = "Please check your connection. If this problem persists, please contact the administrator."
          $("#submit").removeAttr("disabled");
          $("#reset").removeAttr("disabled");
          return false;
        }});    
  }

          
          
  		</script>
			
			
      </div>
    </div>
    </div>
  
    <div class="footer">
      <img class="footer-tri" src="../svg/page3/button-orange.svg" alt="page 3"/>
    </div> 
  
  </section> 
  
</body>

</html>
